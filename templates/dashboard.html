{% extends "template.html"%}
{% block content%}

<div class="container-fluid" style="height: 100%">
    <div class="row" style="height: 100%">
        <div class="col- containernav navlateral " style="width: 20% ;background-color: #124f72">
            <img src="static/img/logo.png" alt="" class="imagelogo">
            <img src="static/img/profile.jpg" class="img-fluid mx-auto d-block imageprofile" alt="...">
            <h3>Olá, {{ session.name }}!</h3>
            <h4>Empresa: {{ session.empresa }}</h4>
            <h4>Departamento: {{ session.departamento }}</h4>
            <div class="d-flex align-items-center flex-column bd-highlight mb-3 " style="height: 300px">
                <a class="btn btn-primary anavlateral" href="/dashboard" role="button">Início</a>
                {% if session['role'] == 'Administrador' or 'Gerente de departamento' or gerente%}
                <a class="btn btn-primary anavlateral" href="/config" role="button">Configurações</a>
                {% endif %}
                <a class="mt-auto p-2 bd-highlight btn btn-warning anavlateral" href="/logout" role="button">Sair</a>
            </div>
        </div>
        <div class="col- containercont" style="width: 80%">
            <div style="padding: 10px 50px 0px 50px">
                {% if session['role'] != 'Departamento' %}
                <a class="btn btn-primary" style="display: inline-block; float:right" href="/CadastrarDashboard"> <i class="bi bi-file-earmark-plus "></i>Adicionar novo arquivo
                </a>
                {% endif %}
                <p style="font-size: 25px; display: inline-block">Departamentos disponíveis</p>
            </div>
            {% for departamento, arquivos in arquivos_por_departamento.items() %}
            <div class="department-section" style="margin-top: 20px">
                <h2 style="margin-left: 50px">Departamento {{ departamento }}</h2>
                <div class="swiper mySwiper department-container">
                    <div class="swiper-wrapper">
                        {% for arquivo in arquivos %}
                        <a href="http://{{ arquivo[1] }}" class="swiper-slide file-card">
                            <img src="static/img/dash/{{ arquivo[2] }}" alt="">
                            <h5>{{ arquivo[0] }}</h5>
                        </a>
                        {% endfor %}
                    </div>
                    <div class="swiper-button-next"></div>
                    <div class="swiper-button-prev"></div>
                    <div class="swiper-pagination"></div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"></script>
<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

<!-- Initialize Swiper -->
<script>
    var swiper = new Swiper(".mySwiper", {
        slidesPerView: 3,
        spaceBetween: 30,
        slidesPerGroup: 3,
        loop: true,
        loopFillGroupWithBlank: true,
        pagination: {
            el: ".swiper-pagination",
            clickable: true,
        },
        navigation: {
            nextEl: ".swiper-button-next",
            prevEl: ".swiper-button-prev",
        },
    });
</script>
{%endblock%}
